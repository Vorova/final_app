<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head lang="ru" th:replace="fragments/head :: head (${title})"></head>
<body>

<div th:replace="fragments/header :: header (${user})"></div>

<div class="container-fluid">
    <div class="row">
        <div class="col-2 p-0 pt-2">
            <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                <a class="nav-link active" id="v-pills-admin-tab" data-toggle="pill" href="#v-pills-admin"
                   role="tab"
                   aria-controls="v-pills-admin" aria-selected="true">Admin</a>
                <a class="nav-link" id="v-pills-user-tab" data-toggle="pill" href="#v-pills-user" role="tab"
                   aria-controls="v-pills-user" aria-selected="false">User</a>
            </div>
        </div>
        <div class="col-10 bg-light p-4">
            <div class="tab-content" id="v-pills-tabContent">
                <!--  USER INFORMATION PAGE  -->
                <div class="tab-pane fade " id="v-pills-user" role="tabpanel" aria-labelledby="v-pills-user-tab">
                    <p class="h2">User information-page</p>
                    <div th:replace="fragments/about_user :: about_user (${user})"></div>
                </div>

                <!--   ADMIN PANEL-->
                <div class="tab-pane fade show active" id="v-pills-admin" role="tabpanel"
                     aria-labelledby="v-pills-admin-tab">
                    <h1><b>Admin panel</b></h1>

                    <!--     NAV     ALL USERS + NEW USER    -->
                    <nav>
                        <div class="nav nav-tabs" id="nav-tab" role="tablist">
                            <a class="nav-item nav-link active" id="nav-user-table-tab" data-toggle="tab"
                               href="#nav-user-table"
                               role="tab" aria-controls="nav-user-table" aria-selected="true">User table</a>
                            <a class="nav-item nav-link" id="nav-new-user-tab" data-toggle="tab"
                               href="#nav-new-user" role="tab"
                               aria-controls="nav-new-user" aria-selected="false">New User</a>
                        </div>
                    </nav>

                    <div class="tab-content" id="nav-tabContent">
                        <!--   ALL USERS   -->
                        <div class="tab-pane fade show active" id="nav-user-table" role="tabpanel"
                             aria-labelledby="nav-user-table-tab">
                            <div th:replace="fragments/all_users :: all_users (${users})"></div>
                        </div>

                        <!--   NEW USER   -->
                        <div class="tab-pane fade" id="nav-new-user" role="tabpanel"
                             aria-labelledby="nav-new-user-tab">
                            <div th:replace="fragments/add_user :: add_user (${newUser})"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Edit/Delete -->
<div th:replace="fragments/modal/edit :: edit"></div>
<div th:replace="fragments/modal/delete :: delete"></div>

<div th:replace="fragments/foot :: foot"></div>
<script>
    $('#editModal').on('show.bs.modal', function (event) {
        let button = $(event.relatedTarget);
        let id = button.data('user-id');
        showEditModal(id);
    })
    $('#deleteModal').on('show.bs.modal', function (event) {
        let button = $(event.relatedTarget);
        let id = button.data('user-id');
        showDeleteModal(id);
    })
</script>

</body>
</html>